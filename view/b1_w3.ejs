<style>
#container {
  position: relative;
}

.head {
  position: relative;
}

.instruction {
  position: relative;
  height: 50px;
  line-height: 50px;
  font-size: 30px;
  text-align: center;
  background: #2C3E50;
  color: white;
}

.hint {
  position: relative;
  height: 50px;
  text-align: center;
  background: #18BC9C;
  color: white;
  font-size: 20px;
  padding-top: 10px;
}

.workspace {
  position: absolute;
  top: 100px;
  left: 0;
  bottom: 0;
  right: 0;
  height: 600px; width: 400px;
}
.workspace .background {
  height: 600px;
  width: auto;
  margin-left: 30px;
  display: block;
  float:left;
}
.sel-box {
  position: absolute;
  border:2px dashed transparent;
  padding:10px;
  height: 70px;
  width: 70px;
  top: 270px;
  left: 520px;
  cursor:pointer;
}
.text-box {
  position: absolute;
  border:2px dashed transparent;
  background-color: #000000;
  text-align: center;
  color: yellow;
  font-size: 22px;
  padding:10px;
  height: 50px;
  width: 140px;
  top: 30px;
  left: 180px;
}


</style>
<div id="container">
  <div class="head">
    <div class="instruction">엘리베이터 놀이를 해봐요</div>
    <div class="hint">화살표 버튼을 눌러 엘레베이터를 불러봐요!</div>
  </div>
  <div class="workspace">
    <div class="text-box">1</div>
    <div class="sel-box"></div>
    <img class="background" src="img/b1_w3/el_img1.png"/>
  </div>

</div>

<script>
  var step = 1;
  var audio1 = new Audio('img/b1_w3/el_sound1.mp3');
  var audio2 = new Audio('img/b1_w3/el_sound2.mp3');
  var audio3 = new Audio('img/b1_w3/el_sound3.mp3');
  var audio4 = new Audio('img/b1_w3/walk.mp3');
  $(".sel-box").click(function() {
  	if(step==1){
      audio1.play();
      this.style.height = "400px";
      this.style.width = "300px";
      this.style.top = "150px";
      this.style.left = "100px";
      setTimeout( function () {
        $(".hint").text('엘리베이터가 왔어요! 안으로 들어가봐요!');
        $(".background").attr("src","img/b1_w3/el_img2.png");
      }, 4500);
      step = 2;
    }else if(step==2){
      audio4.play();
      this.style.height = "70px";
      this.style.width = "70px";
      this.style.top = "230px";
      this.style.left = "500px";
      setTimeout( function () {
        $(".hint").text('엘리베이터 안으로 들어왔어요! 5층을 눌러봐요!');
        $(".background").attr("src","img/b1_w3/el_img3.png");
      }, 1000);
      step = 3;
    }else if(step==3){
      audio2.play();
      sleep(2000);
      $(".background").attr("src","img/b1_w3/el_img4.png");
      audio3.play();
      var i=1;
      var uploop = setInterval(function(){
        if(i<5){
          i++;
          var num = i.toString();
          $(".text-box").text(num);
        }else{
          audio1.play();
          setTimeout( function () {
            $(".background").attr("src","img/b1_w3/el_img5.png");
            $(".hint").text('엘리베이터가 5층에 도착했어요! 밖으로 나가봐요!');
          }, 4500);
          step = 4;
          clearInterval(uploop);
        }
      }, 1000);
      this.style.height = "400px";
      this.style.width = "300px";
      this.style.top = "150px";
      this.style.left = "100px";
    }else if(step==4){
      audio4.play();
      $(".hint").text('성공!');
      step = 5;
    }
  });

  function sleep(num){	//[1/1000초]
	 var now = new Date();
	   var stop = now.getTime() + num;
	   while(true){
		 now = new Date();
		 if(now.getTime() > stop)return;
	   }
	}

</script>
